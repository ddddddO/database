# database
databaseを作ってみる


# 概要

- DBMS
    - 転送サブシステム
        - [概要]クライアントのクエリを受け付けてクエリプロセッサに渡す
    - クエリプロセッサ
        - [概要]渡ってきたクエリの解析、解釈、検証、アクセス制御を実行後、クエリの効率的な方法を探し実行計画（またはクエリ計画）として出力する
        - クエリパーサ
            - [概要]クエリの解析、解釈、検証、アクセス制御を担当
        - クエリオプティマイザ
            - [概要]クエリの最適化と実行計画出力の担当
    - 実行エンジン
        - [概要]実行計画を処理する。リモート操作とローカル操作の実行結果を収集する。?
        - リモート実行
        - ローカル実行
            - [概要]ストレージエンジンによって実行される
    - ストレージエンジン
        - [概要]以下の、機能に特化した複数のコンポーネントで構成される
        - トランザクションマネージャ
            - [概要]トランザクションのスケジュールを管理。データベースが論理的に一貫性を失った状態にならないようにする。ロックマネージャと連動して同時実行制御をする
        - ロックマネージャ
            - [概要]トランザクションを実行するためのロック担当。並行処理によって物理的なデータの整合性が侵されることがないようにする
        - アクセスメソッド（ストレージ構造）
            - [概要]ディスク上のデータへのアクセスとそれらの構成を管理。ヒープファイルが含まれ、Bツリー、LSMツリーなどのストレージ構造も含まれる
        - バッファマネージャ
            - [概要]データベースをメモリにキャッシュする
        - リカバリマネージャ
            - [概要]操作ログを管理。障害発生後にシステムの状態を復旧する

(詳説データベースP9あたりを参考)


# Refs
- 詳説データベース

- [DBMSをGoで実装してみた](https://buildersbox.corp-sansan.com/entry/2019/10/24/110000)
    - [実装](https://github.com/ad-sho-loko/bogoDB)
    - 網羅的
    - [参考にしているCMUの動画](https://www.youtube.com/watch?v=v4bU6n97Vr8)

- [Writing a SQL database from scratch in Go: 1. SELECT, INSERT, CREATE and a REPL](https://notes.eatonphil.com/database-basics.html)
    - [実装](https://github.com/eatonphil/gosql)
    - フロントよりの実装を紹介しているよう。
    - クエリをパースしたり、自前のsqldriverでpostgresqlに接続しているよう。
